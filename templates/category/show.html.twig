{% extends 'base.html.twig' %}

{% block title %}{{ category.name }} - Category Details{% endblock %}

{% block body %}
    <div class="content-header">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <h2>{{ category.name }}</h2>
                <nav class="breadcrumb-nav">
                    <a href="{{ path('app_category_index') }}" class="breadcrumb-link">Categories</a>
                    <span class="breadcrumb-separator">/</span>
                    <span class="breadcrumb-current">{{ category.name }}</span>
                </nav>
            </div>
            <div class="action-buttons">
                <a href="{{ path('app_category_edit', {'id': category.id}) }}" class="btn-modern btn-warning">
                    <i class="fas fa-edit"></i>
                    Edit
                </a>
            </div>
        </div>
    </div>

    <div class="content-body">
        <!-- Category Details Card -->
        <div class="detail-card mb-4">
            <div class="detail-header">
                <h3>Category Information</h3>
            </div>
            <div class="detail-body">
                <div class="detail-grid">
                    <div class="detail-item">
                        <label class="detail-label">ID</label>
                        <div class="detail-value">#{{ category.id }}</div>
                    </div>
                    <div class="detail-item">
                        <label class="detail-label">Name</label>
                        <div class="detail-value">{{ category.name }}</div>
                    </div>
                    <div class="detail-item full-width">
                        <label class="detail-label">Description</label>
                        <div class="detail-value">
                            {{ category.description ?: 'No description provided' }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Products Section -->
        <div class="detail-card">
            <div class="detail-header">
                <div class="d-flex justify-content-between align-items-center">
                    <h3>Products in this Category</h3>
                    <span class="badge bg-primary">{{ category.products|length }} Products</span>
                </div>
            </div>
            <div class="detail-body">
                {% if category.products|length > 0 %}
                    <div class="table-container">
                        <table class="modern-table">
                            <thead>
                            <tr>
                                <th style="width: 80px;">ID</th>
                                <th>Product</th>
                                <th style="width: 120px;">Price</th>
                                <th style="width: 100px;">Stock</th>

                                <th style="width: 150px;">Actions</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for product in category.activeProducts %}
                                <tr>
                                    <td>
                                        <span class="text-muted">#{{ product.id }}</span>
                                    </td>
                                    <td>
                                        <div class="fw-medium">{{ product.name }}</div>
                                    </td>
                                    <td>
                                        <span class="price-value">â‚¹{{ product.price|number_format(2) }}</span>
                                    </td>
                                    <td>
                                            <span class="stock-badge {{ product.stock > 10 ? 'stock-good' : (product.stock > 0 ? 'stock-low' : 'stock-out') }}">
                                                {{ product.stock }}
                                            </span>
                                    </td>

                                    <td>
                                        <div class="btn-group">
                                            <a href="{{ path('app_product_show', {id: product.id}) }}"
                                               class="btn-modern btn-primary btn-sm">
                                                <i class="fas fa-eye"></i>
                                            </a>
                                            <a href="{{ path('app_product_edit', {id: product.id}) }}"
                                               class="btn-modern btn-warning btn-sm">
                                                <i class="fas fa-edit"></i>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <div class="empty-state-small">
                        <div class="empty-icon">
                            <i class="fas fa-box-open"></i>
                        </div>
                        <h4>No Products Yet</h4>
                        <p class="text-muted">This category doesn't have any products assigned to it.</p>
                    </div>
                {% endif %}
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="form-actions mt-4">
            <a href="{{ path('app_category_index') }}" class="btn-modern btn-secondary me-2">
                <i class="fas fa-list"></i>
                All Categories
            </a>
            <a href="{{ path('app_category_edit', {'id': category.id}) }}" class="btn-modern btn-warning me-2">
                <i class="fas fa-edit"></i>
                Edit Category
            </a>
            {{ include('category/_delete_form.html.twig') }}
        </div>
    </div>
{% endblock %}
